import { Theme } from "../../theme.slint";
import { SettingsState } from "../../settings_state.slint";
import { VerticalBox, ScrollView, HorizontalBox } from "std-widgets.slint";
import { SectionHeader, KeyBindingRow } from "widgets.slint";

export component ControlsTab inherits VerticalBox {
    spacing: Theme.spacing-small;
    padding: Theme.spacing-medium;
    HorizontalBox {
        spacing: 12px;
        padding-left: 4px;
        padding-right: 4px;
        Text {
            text: "Action";
            horizontal-stretch: 1;
            font-weight: 700;
            color: Theme.foreground-muted;
        }

        Text {
            text: "Primary";
            width: 120px;
            horizontal-alignment: center;
            font-weight: 700;
            color: Theme.foreground-muted;
        }

        Text {
            text: "Secondary";
            width: 120px;
            horizontal-alignment: center;
            font-weight: 700;
            color: Theme.foreground-muted;
        }
    }

    VerticalBox {
        spacing: Theme.spacing-xsmall;
        alignment: start;
        SectionHeader {
            title: "Movement";
        }

        KeyBindingRow {
            action-label: "Move Up";
            current-key: SettingsState.key-move-up;
            current-key-2: SettingsState.key-move-up-2;
            action-id: "move_up";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Move Down";
            current-key: SettingsState.key-move-down;
            current-key-2: SettingsState.key-move-down-2;
            action-id: "move_down";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Move Left";
            current-key: SettingsState.key-move-left;
            current-key-2: SettingsState.key-move-left-2;
            action-id: "move_left";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Move Right";
            current-key: SettingsState.key-move-right;
            current-key-2: SettingsState.key-move-right-2;
            action-id: "move_right";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        Rectangle {
            height: Theme.spacing-small;
        }

        SectionHeader {
            title: "Combat";
        }

        KeyBindingRow {
            action-label: "Basic Attack";
            current-key: SettingsState.key-basic-attack;
            current-key-2: SettingsState.key-basic-attack-2;
            action-id: "basic_attack";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        Rectangle {
            height: Theme.spacing-small;
        }

        SectionHeader {
            title: "Interface";
        }

        KeyBindingRow {
            action-label: "Inventory";
            current-key: SettingsState.key-inventory;
            current-key-2: SettingsState.key-inventory-2;
            action-id: "inventory";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Skills";
            current-key: SettingsState.key-skills;
            current-key-2: SettingsState.key-skills-2;
            action-id: "skills";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Spells";
            current-key: SettingsState.key-spells;
            current-key-2: SettingsState.key-spells-2;
            action-id: "spells";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Settings";
            current-key: SettingsState.key-settings;
            current-key-2: SettingsState.key-settings-2;
            action-id: "settings";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Refresh";
            current-key: SettingsState.key-refresh;
            current-key-2: SettingsState.key-refresh-2;
            action-id: "refresh";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        Rectangle {
            height: Theme.spacing-small;
        }

        SectionHeader {
            title: "Hotbar Slots";
        }

        KeyBindingRow {
            action-label: "Slot 1";
            current-key: SettingsState.key-hotbar-slot-1;
            current-key-2: SettingsState.key-hotbar-slot-1-2;
            action-id: "hotbar_slot_1";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Slot 2";
            current-key: SettingsState.key-hotbar-slot-2;
            current-key-2: SettingsState.key-hotbar-slot-2-2;
            action-id: "hotbar_slot_2";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Slot 3";
            current-key: SettingsState.key-hotbar-slot-3;
            current-key-2: SettingsState.key-hotbar-slot-3-2;
            action-id: "hotbar_slot_3";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Slot 4";
            current-key: SettingsState.key-hotbar-slot-4;
            current-key-2: SettingsState.key-hotbar-slot-4-2;
            action-id: "hotbar_slot_4";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Slot 5";
            current-key: SettingsState.key-hotbar-slot-5;
            current-key-2: SettingsState.key-hotbar-slot-5-2;
            action-id: "hotbar_slot_5";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Slot 6";
            current-key: SettingsState.key-hotbar-slot-6;
            current-key-2: SettingsState.key-hotbar-slot-6-2;
            action-id: "hotbar_slot_6";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Slot 7";
            current-key: SettingsState.key-hotbar-slot-7;
            current-key-2: SettingsState.key-hotbar-slot-7-2;
            action-id: "hotbar_slot_7";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Slot 8";
            current-key: SettingsState.key-hotbar-slot-8;
            current-key-2: SettingsState.key-hotbar-slot-8-2;
            action-id: "hotbar_slot_8";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Slot 9";
            current-key: SettingsState.key-hotbar-slot-9;
            current-key-2: SettingsState.key-hotbar-slot-9-2;
            action-id: "hotbar_slot_9";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Slot 10";
            current-key: SettingsState.key-hotbar-slot-10;
            current-key-2: SettingsState.key-hotbar-slot-10-2;
            action-id: "hotbar_slot_10";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Slot 11";
            current-key: SettingsState.key-hotbar-slot-11;
            current-key-2: SettingsState.key-hotbar-slot-11-2;
            action-id: "hotbar_slot_11";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Slot 12";
            current-key: SettingsState.key-hotbar-slot-12;
            current-key-2: SettingsState.key-hotbar-slot-12-2;
            action-id: "hotbar_slot_12";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        Rectangle {
            height: Theme.spacing-small;
        }

        SectionHeader {
            title: "Panel Switching";
        }

        KeyBindingRow {
            action-label: "Inventory Panel";
            current-key: SettingsState.key-switch-to-inventory;
            current-key-2: SettingsState.key-switch-to-inventory-2;
            action-id: "switch_to_inventory";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Skills Panel";
            current-key: SettingsState.key-switch-to-skills;
            current-key-2: SettingsState.key-switch-to-skills-2;
            action-id: "switch_to_skills";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Spells Panel";
            current-key: SettingsState.key-switch-to-spells;
            current-key-2: SettingsState.key-switch-to-spells-2;
            action-id: "switch_to_spells";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Hotbar 1";
            current-key: SettingsState.key-switch-to-hotbar-1;
            current-key-2: SettingsState.key-switch-to-hotbar-1-2;
            action-id: "switch_to_hotbar_1";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Hotbar 2";
            current-key: SettingsState.key-switch-to-hotbar-2;
            current-key-2: SettingsState.key-switch-to-hotbar-2-2;
            action-id: "switch_to_hotbar_2";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }

        KeyBindingRow {
            action-label: "Hotbar 3";
            current-key: SettingsState.key-switch-to-hotbar-3;
            current-key-2: SettingsState.key-switch-to-hotbar-3-2;
            action-id: "switch_to_hotbar_3";
            is-rebinding: SettingsState.rebinding-action == self.action-id;
            rebinding-index: SettingsState.rebinding-index;
            start-rebind(idx) => {
                SettingsState.start-rebind(self.action-id, idx);
            }
            unbind-key(idx) => {
                SettingsState.unbind-key(self.action-id, idx);
            }
        }
    }
}
